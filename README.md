# Automated Edge-Case Discovery in JSON Schema Validation: A Differential Testing Approach Powered by LLMs

## Introduction  
This study investigates the use of Large-Scale Language Models (LLMs) to generate JSON documents for the purpose of testing JSON Schema validation libraries across various programming languages. The primary goal is to identify errors or inconsistencies in these libraries, contributing to the software development community and enhancing the reliability of JSON Schema implementations.

Through the differential testing approach, the study verifies whether the libraries comply with the JSON Schema specification. The project is divided into two phases: the first focuses on generating documents using the LLM and testing five libraries in the JavaScript ecosystem, while the second expands the process to other programming languages, enabling a comparative analysis across different ecosystems. As a result, two relevant inconsistencies were identified in the Lua language, indicating possible deviations from the formal specification.

---

## Phase 1: JSON Validation in JavaScript  
The first phase of the study uses JavaScript with Node.js to make requests to the ChatGPT API, generating JSON documents based on predefined schemas. These documents are then validated by 5 JSON Schema libraries available on npm.  

In this phase, the documents generated by the LLM are used to test libraries in the JavaScript ecosystem, comparing the results between them. If a document is considered valid by one library but rejected by another, this may indicate a discrepancy, pointing to potential errors or incomplete implementations of the JSON Schema specification.  

### JSON Schema Validation Libraries Tested  
Five widely used JSON Schema validation libraries were selected, organized by weekly download counts:  
1. **Ajv JSON Schema Validator** - 116,749,245 weekly downloads  
2. **@exodus/schemasafe** - 1,699,810 weekly downloads  
3. **@cfworker/json-schema** - 128,547 weekly downloads  
4. **json-schema-library** - 114,501 weekly downloads  
5. **@hyperjump/json-schema** - 67,666 weekly downloads  

These data were collected from the npm website on October 25, 2024, ensuring an up-to-date comparison.  

### Differential Testing  
To compare validation results between libraries, the differential testing approach was used. The same set of JSON documents is validated by each library, and any inconsistencies are recorded. These inconsistencies, if found, can provide valuable feedback to the developers and maintainers of the libraries, aiding in improving compliance with the JSON Schema specification.  

### Technologies Used in Phase 1  
- **Node.js**: JavaScript runtime environment.  
- **JavaScript**: Primary language for implementation.  
- **ChatGPT API**: Automatic generation of JSON documents from a JSON Schema.  

---

## Phase 2: Expansion to Multiple Languages  
The second phase of the study expands the validation process to other programming languages, aiming to test JSON Schema libraries in different ecosystems.  

### Selected Programming Languages  
To ensure broader coverage and cross-ecosystem comparison, Phase 2 includes tests in the following programming languages:

- **Go**: A modern, high-performance language widely used in backend and cloud-native development. The validator used for testing in Go is [`gojsonschema`](https://pkg.go.dev/github.com/xeipuuv/gojsonschema).

- **Lua**: A lightweight and efficient language originally developed in Brazil, commonly used in embedded systems, scripting, and game development. The validator used in Lua is [`jsonschema`](https://github.com/api7/jsonschema), adapted for compatibility with Lua 5.3.


### Objectives of Phase 2  
Unlike Phase 1, this stage does not generate new JSON documents but reuses the documents created earlier. This ensures that the same test cases are validated across different languages and their corresponding libraries. The main goal is to identify bugs or implementation errors in JSON Schema validation libraries across different ecosystems.  

---

### Conclusion
In this work, a framework was developed based on the generation of JSON documents using Large Language Models (LLMs), with the goal of performing differential testing on libraries that implement the JSON Schema specification. The tests were conducted across multiple programming languages using different validator implementations. As a result, it was possible to identify divergent behaviors among these tools. Specifically, in the Lua language, two relevant inconsistencies were found in the validation process, indicating potential deviations from the formal JSON Schema specification. 
  